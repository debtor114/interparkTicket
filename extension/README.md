# 티켓팅 모니터 Chrome Extension

인터파크, 티켓링크 등의 티켓팅 사이트에서 사용자의 예매 과정을 모니터링하고 분석하여 자동화에 필요한 모든 정보를 수집하는 Chrome Extension입니다.

## ⚠️ 중요 공지
이 Extension은 **교육 및 연구 목적**으로 개발되었습니다. 실제 티켓팅 자동화에 사용하여 발생하는 문제에 대해서는 책임지지 않습니다.

## 🚀 주요 기능

### 📊 포괄적 데이터 수집
- **네트워크 요청 모니터링**: 모든 HTTP 요청/응답 캡처 (CSS, JS, HTML 포함)
- **DOM 이벤트 녹화**: 클릭, 입력, 폼 제출 등 사용자 상호작용 기록
- **로그인 상태 자동 감지**: 실시간 로그인 상태 모니터링
- **좌석 선택 패턴 분석**: 좌석 선택 과정과 API 호출 패턴 기록
- **결제 플로우 추적**: 결제 과정의 모든 단계 기록

### 🤖 자동화 지원 기능
- **완전한 예매 시퀀스 분석**: 로그인 → 콘서트 선택 → 좌석 선택 → 결제 전체 플로우
- **필수 폼 데이터 추출**: 예매에 필요한 모든 입력 필드 식별
- **타이밍 분석**: 자연스러운 사용자 행동 패턴 분석 및 권장 지연시간 계산
- **기술적 요구사항 추출**: User-Agent, 쿠키, CSRF 토큰 등 필수 설정값
- **XPath 자동 생성**: UI 요소의 정확한 위치 정보

### 📈 실시간 모니터링
- **시각적 상태 표시기**: 페이지 우상단에 모니터링 상태 표시
- **팝업 대시보드**: 실시간 통계 및 제어 패널
- **중요 이벤트 알림**: 예매/결제 관련 중요 액션 감지 시 알림

## 📦 설치 방법

### 1. Extension 파일 준비
```bash
# extension 폴더 구조 확인
extension/
├── manifest.json
├── content.js
├── background.js
├── popup.html
├── popup.js
├── icon16.png (필요시 생성)
├── icon48.png (필요시 생성)
└── icon128.png (필요시 생성)
```

### 2. Chrome Extension 설치
1. Chrome 브라우저에서 `chrome://extensions/` 접속
2. 우상단 "개발자 모드" 활성화
3. "압축해제된 확장 프로그램을 로드합니다" 클릭
4. `extension` 폴더 선택

### 3. 권한 허용
Extension 설치 후 다음 권한들이 자동으로 요청됩니다:
- `activeTab`: 현재 탭 접근
- `tabs`: 탭 정보 조회
- `storage`: 로컬 데이터 저장
- `webRequest`: 네트워크 요청 모니터링
- `webNavigation`: 페이지 탐색 모니터링

## 🎯 사용 방법

### 1. 기본 사용
1. 인터파크나 티켓링크 접속
2. 로그인 수행 → Extension이 자동으로 로그인 감지
3. 평소와 같이 예매 진행 → 모든 과정이 자동으로 기록됨
4. Extension 아이콘 클릭하여 실시간 상태 확인

### 2. 데이터 분석
1. Extension 팝업에서 "예매 데이터 분석" 버튼 클릭
2. 새 창에서 상세한 분석 결과 확인:
   - 로그인 정보 및 시퀀스
   - 콘서트 선택 패턴
   - 좌석 선택 플로우
   - 결제 프로세스
   - 필수 기술 요구사항

### 3. 데이터 내보내기
1. "데이터 내보내기" 버튼 클릭
2. JSON 파일로 완전한 자동화 데이터 다운로드
3. 파일에는 다음 정보들이 포함됩니다:
   - 모든 네트워크 요청/응답
   - 사용자 이벤트 시퀀스
   - 자동화를 위한 구성 데이터
   - 타이밍 및 지연 권장값

## 📋 수집되는 데이터

### 네트워크 데이터
- **요청 정보**: URL, Method, Headers, Body
- **응답 정보**: Status Code, Response Headers, Content-Type
- **리소스 타입**: HTML, CSS, JavaScript, AJAX 요청 등

### 사용자 이벤트
- **클릭 이벤트**: 위치, 대상 요소, XPath
- **입력 이벤트**: 필드명, 타입 (비밀번호는 마스킹)
- **폼 제출**: Action URL, Method, 모든 필드 정보
- **마우스/스크롤**: 움직임 패턴 (throttled)
- **DOM 변화**: 중요한 페이지 구조 변경 사항

### 분석 데이터
- **로그인 플로우**: URL, 필드, 인증 방식
- **예매 시퀀스**: 단계별 액션과 타이밍
- **API 엔드포인트**: 모든 백엔드 호출
- **세션 관리**: 쿠키, CSRF 토큰 사용 패턴

## ⚙️ 고급 설정

### 모니터링 제어
- **자동 시작**: 로그인 감지 시 모니터링 자동 시작
- **수동 제어**: 팝업에서 시작/중지 버튼으로 제어
- **선택적 기록**: 중요 이벤트만 필터링하여 기록

### 데이터 관리
- **자동 정리**: 이벤트 로그 최대 1000개, 요청 로그 무제한
- **세션 분리**: 각 브라우징 세션별로 데이터 분리
- **실시간 저장**: 브라우저 로컬 스토리지에 실시간 백업

## 🔒 프라이버시 및 보안

### 데이터 보호
- **비밀번호 마스킹**: 모든 패스워드 필드는 "[PASSWORD]"로 저장
- **민감정보 필터링**: 개인정보가 포함될 수 있는 데이터 자동 마스킹
- **로컬 저장**: 모든 데이터는 로컬에만 저장 (외부 전송 없음)

### 권한 최소화
- **필수 권한만 요청**: 기능에 꼭 필요한 권한만 사용
- **사이트 제한**: 인터파크, 티켓링크에만 동작
- **사용자 제어**: 언제든지 모니터링 중지 가능

## 📊 분석 결과 예시

Extension을 통해 수집된 데이터로부터 다음과 같은 정보들을 추출할 수 있습니다:

```json
{
  "loginAutomation": {
    "loginUrl": "https://accounts.interpark.com/login/submit",
    "loginForm": {
      "action": "/login/submit",
      "method": "POST",
      "fields": {
        "userId": "[사용자입력]",
        "userPwd": "[MASKED]",
        "rememberMe": "false"
      }
    }
  },
  "seatSelection": {
    "seatApiEndpoints": [
      {
        "url": "https://ticket.interpark.com/api/seat/select",
        "method": "POST"
      }
    ],
    "seatElements": [
      {
        "xpath": "//*[@id='seat-A1']",
        "coordinates": { "x": 245, "y": 156 }
      }
    ]
  },
  "timingAnalysis": {
    "recommendedDelays": {
      "betweenClicks": 800,
      "beforeSubmit": 1200,
      "seatSelection": 1500,
      "paymentConfirm": 3000
    }
  }
}
```

## 🛠️ 개발자 정보

### 기술 스택
- **Manifest V3**: 최신 Chrome Extension 표준
- **Vanilla JavaScript**: 의존성 없는 순수 JavaScript
- **Web APIs**: WebRequest, Storage, Tabs API 활용

### 주요 컴포넌트
- **background.js**: 네트워크 모니터링 및 데이터 분석
- **content.js**: DOM 이벤트 녹화 및 로그인 감지
- **popup.js**: 사용자 인터페이스 및 제어 패널

## ⚠️ 제한사항 및 주의사항

1. **법적 책임**: 실제 자동화 사용 시 발생하는 모든 문제는 사용자 책임
2. **사이트 정책**: 각 티켓팅 사이트의 이용약관을 반드시 확인
3. **봇 탐지**: 일부 사이트에서 비정상 접근으로 감지될 수 있음
4. **데이터 정확성**: 수집된 데이터의 완전성을 보장하지 않음

## 📞 지원 및 문의

- 이 Extension은 교육/연구 목적으로 개발되었습니다
- 실제 사용에 대한 지원은 제공되지 않습니다
- 코드는 학습 목적으로 자유롭게 활용 가능합니다

---

**⚠️ 다시 한번 강조: 이 도구는 교육 목적으로만 사용하세요. 실제 자동화에 사용하여 발생하는 모든 결과에 대해서는 사용자가 책임져야 합니다.**